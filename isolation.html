<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="1350" height="630" onclick="position()"style="border:1px solid #ffffff;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>
var bluex=725,bluey=175,redx=675,redy=525;
var check=0;
var arrx=[],arry=[];
var element=document.getElementById("myCanvas");
var switching=1;
function position()
{
  var x = event.clientX;
  var y = event.clientY;
  x=x-x%50+25;
  y=y-y%50+25;
  if((x>500 && x<900 && y>150 && y<550)&&(x!=redx || y!=redy)&&(x!=bluex || y!=bluey))
  {
  check=0;
  for(var i=0;i<arrx.length;i++)
  {
    if(x==arrx[i] && y==arry[i])
     {check=1;
       break;
     }
  }
  if(check==0)
  {
  if(switching==1)
  {
  setup();
  console.log(x,y);
    if(((x-redx==50 || redx-x==50 || x==redx)&&(y-redy==50 || redy-y==50 || y==redy))&&((x-bluex!=50 && bluex-x!=50 && x!=bluex)||(y-bluey!=50 && bluey-y!=50 && y!=bluey)))
    {
      switching=0;
      redx=x;
      redy=y;
   }
  pieces();
}
else {
  console.log(1);
 switching=1;
 ctx.beginPath();
 ctx.fillStyle="white";
 ctx.fillRect(x-25,y-25, 50,50);
 ctx.rect(x-25, y-25, 50,50);
 arrx.push(x);
 arry.push(y);
 }
}
}
}
function setup()
{
  ctx.beginPath();
  ctx.fillStyle="lightgrey";
  for( var i=0;i<8;i++)
  {
    for (var j=0;j<8;j++)
    {
      ctx.fillRect(500+50*i, 150+50*j, 50,50);
      ctx.rect(500+50*i, 150+50*j, 50,50);
    }
  }
  ctx.stroke();
  if(arrx.length!=0)
  {
    ctx.beginPath();
  ctx.fillStyle="white";
  for(var i=0;i<arrx.length;i++)
  {
    ctx.fillRect(arrx[i]-25,arry[i]-25, 50,50);
    ctx.rect(arrx[i]-25,arry[i]-25, 50,50);
  }
    ctx.stroke();
 }
}
function pieces()
{
  ctx.beginPath();
  ctx.arc(bluex, bluey, 15, 0, 2 * Math.PI);
  ctx.fillStyle = "blue";
  ctx.fill();
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(redx, redy, 15, 0, 2 * Math.PI);
  ctx.fillStyle = "red";
  ctx.fill();
  ctx.stroke();
}
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
setup();
pieces();
</script>
</body>
</html>
